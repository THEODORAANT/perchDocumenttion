<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Using Runway - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Using Runway">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li class="selected"><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/runway/caching/">Caching</a>
                             
                        </li>
                        <li>
                            <a href="/runway/cloud-storage/">Cloud Storage</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/collections/">Collections</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/configuration/">Configuration</a>
                        </li>
                        <li>
                            <a href="/runway/core-tasks/">Core Tasks</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/getting-started/">Getting Started with Runway</a>
                            <ul>    <li>
                            <a href="/runway/getting-started/backup/">Backup</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/runway/getting-started/installing/">Installing Runway</a>
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/runway/getting-started/upgrading-perch-to-runway/">Upgrading Perch to Runway</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/runway/getting-started/using-runway/" class="selected">Using Runway</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/runway/headless/">Headless requests</a>
                             
                             
                        </li>
                        <li>
                            <a href="/runway/relationships/">Relationships</a>
                        </li>
                        <li>
                            <a href="/runway/routing/">Routing</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/site-access/">Controlling site access</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading/">Upgrading to Runway 4</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading3/">Upgrading to Runway 3</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Using Runway</h1>

  <p>In order to get the most out of Perch Runway, it’s important to understand the basic concepts and how to put them to use. This page describes those core concepts.</p>
<h2 id="1-url-rewriting-and-routing">1. URL Rewriting and Routing</h2>
<p>Runway uses your web server’s ability to <em>rewrite</em> incoming URLs and point those requests to a single entry point. This is sometimes called a <em>Front Controller</em>. For Runway, it’s the <code>start.php</code> script that handles all page requests.</p>
<p>Once Runway has received the request, it then decides which page to display. This is known as <em>routing</em> - deciding which page will the incoming request be routed to.</p>
<p>When you add a page in Runway, it has a URL. By default, this is used by the router, and any direct request of that page’s URL will result in a direct match. For some sites, that’s all you’ll need.</p>
<p>For sites with more complex requirements, you can add additional pattern to match more complex URLs and route them through to your pages. For example, a blog might have URLs like this:</p>
<pre><code>/blog/2014/my-post-title
</code></pre><p>No page with that URL exists, as you don’t have a new page for every blog post in the database. Instead, you’d create a route to match it and direct that request through to the page that displays blog posts. The URL pattern for the route might look like this:</p>
<pre><code>blog/[year]/[slug]
</code></pre><p>You can read more about <a href="/runway/getting-started/installing/rewrites/">setting up URL rewriting</a> and <a href="/runway/routing/">using the routing features</a>.</p>
<h2 id="2-master-pages">2. Master Pages</h2>
<p>In Perch Runway, every page request ends up at a Master Page. (This is in contrast to Perch, where every page in the site has a corresponding file in the site tree.)</p>
<p>In Runway, every <em>type</em> of page in your site is created as a Master Page. That means you’ll end up with some which are unique (like a home page) and others that are reused many times (like a general article page).</p>
<p>The Master Page is the blueprint for what appears on the page. It might include a certain layout, then perhaps an image slideshow followed by a news listing and a footer, for example.</p>
<p>Master Pages are created as <code>.php</code> files within the <code>perch/templates/pages</code> folder, and can be organised into subfolders.</p>
<p>When creating a new page, you pick which Master Page it will use. Updating a Master Page updates all the pages based on it.</p>
<p><strong>Example</strong></p>
<pre><code class="lang-php">&lt;?php
    // output the top of the page
    perch_layout(&#39;global/top&#39;, [
        &#39;page_title&#39; =&gt; perch_page_title(true),
    ]);

    // main navigation
    perch_pages_navigation([
        &#39;levels&#39;   =&gt; 1,
        &#39;template&#39; =&gt; &#39;main_nav.html&#39;,
    ]);

    // page-specific introduction content
    perch_content(&#39;News introduction&#39;);

    // a list of articles from the &#39;News&#39; collection
    perch_collection(&#39;News&#39;, [
        &#39;sort&#39;       =&gt; &#39;published_on&#39;,
        &#39;sort-order&#39; =&gt; &#39;DESC&#39;,
        &#39;count&#39;      =&gt; 10,
    ]);

    // reusable sidebar containing the latest tweet
    perch_layout(&#39;news/sidebar&#39;, [
        &#39;tweets&#39; =&gt; perch_twitter_get_latest([
                        &#39;count&#39; =&gt; 1,
                    ], true),
    ]);

    // closing footer
    perch_layout(&#39;global/footer&#39;);
</code></pre>
<p>Read <a href="/runway/structure/master-pages/">more about Master Pages</a>.</p>
<h2 id="3-layouts">3. Layouts</h2>
<p>Master Pages can make use of Layouts for drawing in common reusable page fragments like headers, footers, sidebars and so on.</p>
<p>Layout files are PHP partials, rather than templates, and are designed to work as extensions to Master Pages for code reusability.
They are intended to be as flexible as possible in use, so your layout files can be structured in whatever way best suites your site.</p>
<p>Often, this results in layouts being used for the structure of the page around your content (things like the opening <code>&lt;html&gt;</code> and <code>&lt;head&gt;</code> sections of a page, and the corresponding closing sections at the bottom), as well as reusable components within them (like navigation components, sidebar modules and the like).</p>
<p>Layout variables enable you to pass parameters to a layout as it is called, in order to control content within it or change how it behaves.</p>
<p>Read <a href="/docs/layouts/">more about Layouts</a> and <a href="/docs/layouts/variables/">layout variables</a>.</p>
<h2 id="4-page-functions">4. Page functions</h2>
<p>When a Master Page needs to use some content, it makes use of a page function to request it. This could be anything from a simple <code>perch_content()</code> editable region, to a <code>perch_collection()</code> collection listing, or perhaps some functionally provided by an installed add-on.</p>
<p>Page functions are how content is loaded up from the database and output to the page.</p>
<p>In the examples above, <code>perch_pages_navigation()</code>, <code>perch_content()</code>, <code>perch_collection()</code>, <code>perch_page_title()</code>, and <code>perch_twitter_get_latest()</code> are all examples of page functions that bring back some content from the system.</p>
<p><strong>Example</strong></p>
<pre><code class="lang-php">&lt;?php
    perch_collection(&#39;News&#39;, [
        &#39;sort&#39;       =&gt; &#39;published_on&#39;,
        &#39;sort-order&#39; =&gt; &#39;DESC&#39;,
        &#39;count&#39;      =&gt; 10,
    ]);
?&gt;
</code></pre>
<h2 id="5-templates">5. Templates</h2>
<p>When a page function outputs content, it does so using a template. A template is a fragment of (usually) HTML that contains tags defining the different content fields in use.</p>
<p><strong>Example</strong></p>
<pre><code class="lang-html">&lt;h1&gt;
    &lt;perch:content id=&quot;title&quot; type=&quot;text&quot; label=&quot;Title&quot;&gt;
&lt;/h1&gt;
&lt;p&gt;
    Published on:
    &lt;perch:content id=&quot;published_on&quot; type=&quot;date&quot; label=&quot;Date&quot; format=&quot;d F Y H:i&quot;&gt;
&lt;/p&gt;
</code></pre>
<p>Everything that is output from a page function is done so through a template. Templates are custom to your site and contain whatever markup your site needs. They are usually HTML, but can output any type of text format.</p>
<p>Read <a href="/docs/templates/">more about templates</a>.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
