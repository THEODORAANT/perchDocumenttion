<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>OpenStack Object Storage - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="OpenStack Object Storage">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li class="selected"><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/runway/caching/">Caching</a>
                             
                        </li>
                        <li>
                            <a href="/runway/cloud-storage/">Cloud Storage</a>
                            <ul>    <li>
                            <a href="/runway/cloud-storage/amazon/">Amazon S3</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/runway/cloud-storage/dropbox/">Dropbox</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/runway/cloud-storage/openstack/" class="selected">OpenStack Object Storage</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/runway/collections/">Collections</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/configuration/">Configuration</a>
                        </li>
                        <li>
                            <a href="/runway/core-tasks/">Core Tasks</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/getting-started/">Getting Started with Runway</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/headless/">Headless requests</a>
                             
                             
                        </li>
                        <li>
                            <a href="/runway/relationships/">Relationships</a>
                        </li>
                        <li>
                            <a href="/runway/routing/">Routing</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/site-access/">Controlling site access</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading/">Upgrading to Runway 4</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading3/">Upgrading to Runway 3</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>OpenStack Object Storage</h1>

  <p>Use the following procedure to configure a resource bucket for use with an OpenStack Object Storage compatible API such as Rackspace CloudFiles or Memset Memstore. Here we’ll use the example of configuring a bucket for Rackspace Cloud Files.</p>
<h2 id="configure">Configure</h2>
<p>Open up your <code>perch/config/runway.php</code> file and look for the OpenStack Object Storage section. It looks like this:</p>
<pre><code class="lang-php">&#39;openstack_object_storage&#39; =&gt; [
    &#39;username&#39;     =&gt; &#39;&#39;,
    &#39;password&#39;     =&gt; &#39;&#39;,
    &#39;tenantid&#39;     =&gt; &#39;&#39;,
    &#39;endpoint&#39;     =&gt; &#39;&#39;,
    &#39;region&#39;       =&gt; &#39;&#39;,
    &#39;handler&#39;      =&gt; &#39;PerchOpenStack_ResourceBucket&#39;,
    &#39;handler_path&#39; =&gt; PERCH_PATH.&#39;/addons/apps/perch_openstack/PerchOpenStack_ResourceBucket.class.php&#39;,
],
</code></pre>
<p>Add your configuration settings. For example for Rackspace, you’d use something like this</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>username</code></td>
<td>Rackspace user account username</td>
<td><code>bridgetjones</code></td>
</tr>
<tr>
<td><code>password</code></td>
<td>Rackspace user account password (not an API key)</td>
<td><code>abc-123-def-456</code></td>
</tr>
<tr>
<td><code>tenantid</code></td>
<td>Your Rackspace account number</td>
<td><code>123456789</code></td>
</tr>
<tr>
<td><code>endpoint</code></td>
<td>Authentication service endpoint URL</td>
<td><code>https://lon.identity.api.rackspacecloud.com/v2.0</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td>Geographical region code</td>
<td><code>LON</code></td>
</tr>
</tbody>
</table>
<p>For Memset Memstore, you’d use settings like the below. Note, <code>tenantname</code> rather than <code>tenantid</code> in this case.</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Value</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>username</code></td>
<td>Memstore user account username</td>
<td><code>bridgetjones</code></td>
</tr>
<tr>
<td><code>password</code></td>
<td>Memstore user account password</td>
<td><code>abc-123-def-456</code></td>
</tr>
<tr>
<td><code>tenantname</code></td>
<td>Memstore account nane</td>
<td><code>msjonesaa1</code></td>
</tr>
<tr>
<td><code>endpoint</code></td>
<td>Authentication service endpoint URL</td>
<td><code>https://auth.storage.memset.com</code></td>
</tr>
<tr>
<td><code>region</code></td>
<td>Geographical region code</td>
<td><code>reading</code></td>
</tr>
</tbody>
</table>
<p>Obviously, being a broader API with lots of different implementations, getting the right incantation to authenticate with your provider of choice can take a little bit of experimentation.</p>
<h2 id="add-a-resource-bucket">Add a resource bucket</h2>
<p>Next, open up your <code>perch/config/buckets.php</code> file. By default it is empty. Create a new bucket - we’ll call this one <code>images</code></p>
<pre><code class="lang-php">&lt;?php
    return [
        &#39;images&#39; =&gt; [
                 &#39;type&#39;      =&gt; &#39;openstack_object_storage&#39;,
                 &#39;web_path&#39;  =&gt; &#39;&#39;,
                 &#39;file_path&#39; =&gt; &#39;&#39;,
         ],
    ]
</code></pre>
<p>The <code>file_path</code> should be the name of the container you wish to store the files in. The <code>web_path</code> is the HTTP path to the container. The <code>type</code> is always <code>openstack_object_storage</code>.</p>
<p><strong>Example defining two buckets</strong></p>
<pre><code class="lang-php">&lt;?php
    return [
        &#39;images&#39; =&gt; [
                 &#39;type&#39;      =&gt; &#39;openstack_object_storage&#39;,
                 &#39;web_path&#39;  =&gt; &#39;http://abc123def456.r50.cf3.rackcdn.com&#39;,
                 &#39;file_path&#39; =&gt; &#39;myproject.images&#39;,
         ],
         &#39;press_releases&#39; =&gt; [
                  &#39;type&#39;      =&gt; &#39;openstack_object_storage&#39;,
                  &#39;web_path&#39;  =&gt; &#39;http://efg123hij456.r50.cf3.rackcdn.com&#39;,
                  &#39;file_path&#39; =&gt; &#39;myproject.press&#39;,
          ],
    ]
</code></pre>
<h2 id="using-a-cdn">Using a CDN</h2>
<p>If serving page assets (images, fonts, JavaScript etc) from Object Storage, we’d recommend using the CDN service that is often paired with it. Set up the CDN service for the container you’re sharing, and then update the <code>web_path</code> in your bucket list to use the new CDN domain name.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
