<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clean URLs in Perch - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Clean URLs in Perch">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li class="selected"><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/addons/announcements/">Announcements App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/backup/">Backup App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/blog/">Blog App</a>
                            <ul>    <li>
                            <a href="/addons/blog/changelog/">Changelog</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/examples/">Examples</a>
                            <ul>    <li>
                            <a href="/addons/blog/examples/clean-urls-perch/" class="selected">Clean URLs in Perch</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/examples/creating-amp-pages/">Create AMP versions of your blog posts</a>
                        </li>
                    </ul>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/importing/">Importing Posts</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/installation/">Installation</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/post-types/">Post types</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/runway/">Runway</a>
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/spam/">Spam</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/updating/">Updating</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/webmentions/">Webmentions</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/addons/comments/">Comments App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/email_octopus/">EmailOctopus App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/events/">Events App</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/feathers/">Feathers</a>
                        </li>
                        <li>
                            <a href="/addons/field-types/">Field Types</a>
                             
                        </li>
                        <li>
                            <a href="/addons/forms/">Forms App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/gallery/">Gallery App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/kraken/">Kraken App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/listings/">Listings App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/mailchimp/">Mailchimp App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/members/">Members App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/plugins/">Plugins</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/podcasts/">Podcasts App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/poll/">Poll App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/qr/">QRGenerator App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-foxycart/">Foxycart Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-paypal/">PayPal Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop/">Shop App</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twillio/">Twilio App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twitter/">Twitter App</a>
                             
                             
                             
                             
                             
                             
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Clean URLs in Perch</h1>

  <p>For Runway see the Runway configuration documentation under Routing.</p>
<p>As Perch runs on lots of different types of web server, the default examples don’t require any sort of URL rewriting to work. That’s fine, but if you do have URL rewriting available (such as mod_rewrite on Apache) it’s often desirable to clean up the URLs.</p>
<p>These instructions show you how to do that using mod_rewrite for Apache servers. SitePoint also has a great <a href="http://www.sitepoint.com/guide-url-rewriting/">mod_rewrite guide</a> which may be useful to read if you’re new to URL rewriting.</p>
<h2 id="create-an-htaccess-file">Create an .htaccess file</h2>
<p>If you don’t have one, create a file with the name <code>.htaccess</code> (staring with a dot, and no file extension) at the top level of your site. File names that begin with a dot are usually hidden, so you may need to enable your software’s setting to show hidden files.</p>
<p>Add the following to your file</p>
<pre><code class="lang-php">&lt;IfModule mod_rewrite.c&gt;  
    RewriteEngine on  
    # rules go here
&lt;/IfModule&gt;
</code></pre>
<p>Next, we going to add a series of rules to match incoming URLs and remap them to our real file paths. These will go at the point in the file I’ve marked <code># rules go here</code>.</p>
<h2 id="rewriting-post-urls">Rewriting post URLs</h2>
<p>If you’re using our example pages, you post detail page will have a URL like this:</p>
<pre><code class="lang-php">/blog/post.php?s=2012-10-01-my-post-title
</code></pre>
<p>But perhaps we’d rather have a URL like this:</p>
<pre><code class="lang-php">/blog/2012-10-01-my-post-title
</code></pre>
<p>To do so, add the following rule to your file</p>
<pre><code class="lang-php">RewriteRule ^blog/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]
</code></pre>
<p>Save the file and your post should now be accessible from the new URL. You now need to update your site to make sure that the links point to this new URL.</p>
<p>On the Settings page in Perch, find “Blog post page path” in the Blog section. Set its value to:</p>
<pre><code class="lang-php">/blog/{postSlug}
</code></pre>
<p>If using the Sections functionality, you might want to include the section slug</p>
<pre><code class="lang-php">/{sectionSlug}/{postSlug}
</code></pre>
<p>Now, wherever you use <code>&lt;perch:blog id=&quot;postURL&quot;&gt;</code> in your templates, the new URL will be used.</p>
<h3 id="preview-urls">Preview URLs</h3>
<p>Once URLs are rewritten, draft post preview is achieved by adding <code>/preview</code> to the end of your URL, so remember to add a rule for that. You should rewrite it to add the query string argument <code>preview=all</code> to the URL.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
