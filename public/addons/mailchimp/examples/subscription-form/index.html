<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Subscription form - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Subscription form">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li class="selected"><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/addons/announcements/">Announcements App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/backup/">Backup App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/blog/">Blog App</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/comments/">Comments App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/email_octopus/">EmailOctopus App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/events/">Events App</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/feathers/">Feathers</a>
                        </li>
                        <li>
                            <a href="/addons/field-types/">Field Types</a>
                             
                        </li>
                        <li>
                            <a href="/addons/forms/">Forms App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/gallery/">Gallery App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/kraken/">Kraken App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/listings/">Listings App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/mailchimp/">Mailchimp App</a>
                            <ul>    <li>
                            <a href="/addons/mailchimp/changelog/">Changelog</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/mailchimp/examples/">Examples</a>
                            <ul>    <li>
                            <a href="/addons/mailchimp/examples/subscription-form/" class="selected">Subscription form</a>
                        </li>
                    </ul>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/mailchimp/installation/">Installation</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/mailchimp/updating/">Updating</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/addons/members/">Members App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/plugins/">Plugins</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/podcasts/">Podcasts App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/poll/">Poll App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/qr/">QRGenerator App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-foxycart/">Foxycart Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-paypal/">PayPal Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop/">Shop App</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twillio/">Twilio App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twitter/">Twitter App</a>
                             
                             
                             
                             
                             
                             
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Subscription form</h1>

  <p>One you have connected the app with your lists, you may want to add a form to your site to enable site visitors to subscribe. To do this, you need to create a form template.</p>
<p>If it doesn’t exist, create the template <code>templates/mailchimp/forms/subscribe.html</code> with something like the following:</p>
<pre><code class="lang-html">&lt;perch:form id=&quot;subscribe&quot; app=&quot;perch_mailchimp&quot; double-optin=&quot;true&quot;&gt;
    &lt;perch:success&gt;
        &lt;p&gt;Thank you!&lt;/p&gt;
    &lt;/perch:success&gt;
    &lt;div&gt;
        &lt;perch:label for=&quot;email&quot;&gt;Email&lt;/perch:label&gt;
        &lt;perch:input id=&quot;email&quot; required type=&quot;email&quot; mailer=&quot;email&quot;&gt;
        &lt;perch:error type=&quot;required&quot; for=&quot;email&quot;&gt;Required&lt;/perch:error&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;perch:label for=&quot;firstname&quot;&gt;First name&lt;/perch:label&gt;
        &lt;perch:input id=&quot;firstname&quot; required type=&quot;text&quot; mailer=&quot;FNAME&quot;&gt;
        &lt;perch:error type=&quot;required&quot; for=&quot;firstname&quot;&gt;Required&lt;/perch:error&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;perch:label for=&quot;lastname&quot;&gt;Last name&lt;/perch:label&gt;
        &lt;perch:input id=&quot;lastname&quot; required type=&quot;text&quot; mailer=&quot;LNAME&quot;&gt;
        &lt;perch:error type=&quot;required&quot; for=&quot;lastname&quot;&gt;Required&lt;/perch:error&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;perch:input type=&quot;submit&quot; value=&quot;Submit&quot; id=&quot;btnsubmit&quot;&gt;
        &lt;perch:input type=&quot;hidden&quot; value=&quot;1&quot; id=&quot;confirm&quot; mailer=&quot;confirm_subscribe&quot;&gt;
        &lt;perch:input type=&quot;hidden&quot; id=&quot;list&quot; value=&quot;your list ID goes here&quot; mailer=&quot;list&quot;&gt;
    &lt;/div&gt;
&lt;/perch:form&gt;
</code></pre>
<p>An important point is that the opening form tag has <code>app=&quot;perch_mailchimp&quot;</code> - this indicates to Perch that the content from this form should be directed to the MailChimp app to process.</p>
<h3 id="setting-mailer-attributes">Setting <code>mailer</code> attributes</h3>
<p>Use the <code>mailer</code> attribute on form fields to indicate to the MailChimp app which field in your form you want to serve which purpose.</p>
<table>
<thead>
<tr>
<th><code>mailer</code> value</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>list</code></td>
<td>The ID of the list to subscribe to</td>
</tr>
<tr>
<td><code>email</code></td>
<td>The field containing the user’s email address (required)</td>
</tr>
<tr>
<td><code>FNAME</code></td>
<td>The user’s first name.</td>
</tr>
<tr>
<td><code>LNAME</code></td>
<td>The user’s last name.</td>
</tr>
<tr>
<td><code>confirm_subscribe</code></td>
<td>The field indicating that the user has opted in.</td>
</tr>
<tr>
<td><code>interests</code></td>
<td>The MailChimp groups to assign (see below)</td>
</tr>
</tbody>
</table>
<h3 id="setting-which-list-to-subscribe-to">Setting which list to subscribe to</h3>
<p>At the bottom of the template is a hidden field with the ID <code>list</code>. The value of this field needs to be the ID value you can find listed under Lists within the MailChimp app in the Perch control panel. This is how we know which list to subscribe the user to.</p>
<p>If you wish to give the user the option of subscribing to multiple lists, you can do that with checkboxes, for example:</p>
<pre><code class="lang-html">&lt;div&gt;
    &lt;perch:label for=&quot;list-newsletter&quot;&gt;Newsletter&lt;/perch:label&gt;
    &lt;perch:input id=&quot;list-newsletter&quot; type=&quot;checkbox&quot; value=&quot;abc123&quot; mailer=&quot;list&quot;&gt;
&lt;/div&gt;
&lt;div&gt;
    &lt;perch:label for=&quot;list-offers&quot;&gt;Special offers&lt;/perch:label&gt;
    &lt;perch:input id=&quot;list-offers&quot; type=&quot;checkbox&quot; value=&quot;def456&quot; mailer=&quot;list&quot;&gt;
&lt;/div&gt;
</code></pre>
<p>Here we give each checkbox field its own ID as usual. The <code>value</code> attribute of each checkbox should be its list ID from the control panel, and you should set the <code>mailer=&quot;list&quot;</code> attribute.</p>
<p>Note that MailChimp generally discourages the use of multiple lists to segment users. They recomment that it’s better to have one list and use tools like groups to segment within that list.</p>
<h3 id="confirming-the-subscription">Confirming the subscription</h3>
<p>Many territories require you to ask the user to actively opt-in to receiving emails. This is done using the <code>confirm_subscribe</code> field. If you don’t need this functionality, you can leave it as a hidden field:</p>
<pre><code class="lang-html">&lt;perch:input type=&quot;hidden&quot; value=&quot;1&quot; id=&quot;confirm&quot; mailer=&quot;confirm_subscribe&quot;&gt;
</code></pre>
<p>If you do want it, turn it into a checkbox instead:</p>
<pre><code class="lang-html">&lt;perch:input type=&quot;checkbox&quot; value=&quot;1&quot; id=&quot;confirm&quot; mailer=&quot;confirm_subscribe&quot;&gt;
</code></pre>
<p>Unless the <code>confirm_subscribe</code> field is sent with a positive value, the app won’t attempt to subscribe the user to the list.</p>
<h3 id="double-opt-in">Double opt-in</h3>
<p>MailChimp offers a double opt-in feature, where the user must click through from a confirmation email to their address before joining the list. This is an extra step for the user, but helps ensure the quality of the list, and avoids malicious sign-ups.</p>
<p>You can enable double opt-in by adding the following attribute on the opening <code>perch:form</code> tag:</p>
<pre><code>double-optin=&quot;true&quot;
</code></pre><h3 id="interests-groups">Interests / Groups</h3>
<p><em>Experimental feature!</em></p>
<p>Lists can be segmented with the use of <em>interests</em> or <em>groups</em> (MailChimp refers to this feature in two different ways). To offer a list of groups for the user to categorise themselves with, you need to know the ID of the group. At the moment the only way to get that is through the MailChimp <a href="https://us1.api.mailchimp.com/playground/">API Playground</a>. If you have the IDs for your groups, you can add them to the template like so:</p>
<pre><code class="lang-html">&lt;perch:input type=&quot;hidden&quot; id=&quot;cheese&quot; value=&quot;a375f7a461&quot; mailer=&quot;interests&quot;&gt;
&lt;perch:input type=&quot;hidden&quot; id=&quot;cake&quot; value=&quot;85d9005e29&quot; mailer=&quot;interests&quot;&gt;
</code></pre>
<p>Each option should have its own ID as normal. The <code>value</code> should be the ID of the interest, and the <code>mailer</code> attribute should be set to <code>interests</code>.</p>
<p>Note that interests are specific to a list, so the interest IDs need to match up with the list ID you use. This means that if you use interests, your form should only attempt to subscribe to one list.</p>
<p>We would ideally like to improve this feature in a future update, potentially listing the IDs in the control panel or even giving an automated way to add them to the template. If that’s of interest to you, please let us know by posting to the <a href="https://community.perchcms.com/forum/">the forum</a>.</p>
<h2 id="displaying-your-form">Displaying your form</h2>
<p>Once you have the form template all set up, it’s just a case of adding it to your page:</p>
<pre><code class="lang-php">&lt;?php perch_mailchimp_form(&#39;forms/subscribe&#39;); ?&gt;
</code></pre>
<h2 id="subscribing-from-other-forms">Subscribing from other forms</h2>
<p>You don’t need to use a dedicated form just to subscribe users to your list. You can add the functionality to an existing form, such as a contact form. To do that, make sure you’ve added the appropriate <code>list</code> and <code>mailer</code> values to the template, and then update the form’s <code>app</code> attribute to also send the value to MailChimp:</p>
<pre><code class="lang-html">&lt;perch:form id=&quot;contact&quot; app=&quot;perch_mailchimp perch_forms&quot;&gt;
   ...
&lt;/perch:form&gt;
</code></pre>
<p>The apps will execute in order so if you are doing a redirect then put the perch_mailchimp app first in the list so that processing happens before your form kicks in.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
