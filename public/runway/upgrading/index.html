<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Upgrading to Runway 4 - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Upgrading to Runway 4">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li class="selected"><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/runway/caching/">Caching</a>
                             
                        </li>
                        <li>
                            <a href="/runway/cloud-storage/">Cloud Storage</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/collections/">Collections</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/configuration/">Configuration</a>
                        </li>
                        <li>
                            <a href="/runway/core-tasks/">Core Tasks</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/getting-started/">Getting Started with Runway</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/headless/">Headless requests</a>
                             
                             
                        </li>
                        <li>
                            <a href="/runway/relationships/">Relationships</a>
                        </li>
                        <li>
                            <a href="/runway/routing/">Routing</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/runway/site-access/">Controlling site access</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading/" class="selected">Upgrading to Runway 4</a>
                        </li>
                        <li>
                            <a href="/runway/upgrading3/">Upgrading to Runway 3</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Upgrading to Runway 4</h1>

  <p>Perch Runway 4 is a new major version of Perch Runway with some big interface changes. A lot of the underlying structure is backwards compatible, so upgrading to Perch Runway 4 is not complex. </p>
<h2 id="before-you-start">Before you start</h2>
<p>Follow these instructions to help make your upgrade as smooth as possible.</p>
<h3 id="1-make-a-backup">1. Make a backup</h3>
<p>Before making any changes, make a backup of your files and your database. This means that come what may, you can always revert to your current position without doing any damage.</p>
<h3 id="2-work-on-your-dev-or-staging-site">2. Work on your dev or staging site</h3>
<p>We don’t recommend upgrading a live site in-place. Not because the upgrade process is risky, but because that’s not the most sensible way to work for any website updates. Get your staging or dev site up to date (perhaps using the backup of the live site you’ve just made) and try the upgrade there first. If all is well, you can deploy those changes to the live site without worrying and with minimal disruption.</p>
<h2 id="upgrading">Upgrading</h2>
<p>With that done, we should be ready to begin.</p>
<h3 id="1-replace-perch-core">1. Replace Perch core</h3>
<p><a href="https://perchrunway.com/download">Download</a> the latest version of Perch Runway and copy the new <code>perch/core</code> folder over your old <code>perch/core</code> folder.</p>
<h3 id="2-check-your-apps-file">2. Check your apps file</h3>
<p>If you have a very old install to upgrade, your <code>perch/config/config.apps</code> file might contain lots of <code>include()</code> statements. You need to update it or you’ll get errors. A basic starting point <code>apps.php</code> file looks like this:</p>
<pre><code class="lang-php">&lt;?php
    $apps_list = [ 
    ];
</code></pre>
<p>You don’t need the Content or Categories apps listed like in the past. Just add an entry to the list for any add-ons you need installed. For example, an install with Blog and Twitter apps would have:</p>
<pre><code class="lang-php">&lt;?php
    $apps_list = [ 
        &#39;perch_blog&#39;,
        &#39;perch_twitter&#39;,
    ];
</code></pre>
<h3 id="3-remove-unnecessary-add-ons">3. Remove unnecessary add-ons</h3>
<p>Perch Runway 4 contains the MarkItUp and Redactor edits as part of core, so you can remove:</p>
<ul>
<li><code>perch/addons/plugins/editors/markitup</code></li>
<li><code>perch/addons/plugins/editors/redactor</code></li>
</ul>
<p>You can remove the default apps, as they’re now internal too:</p>
<ul>
<li><code>perch/addons/apps/perch_s3</code></li>
<li><code>perch/addons/apps/perch_openstack</code></li>
<li><code>perch/addons/apps/perch_varnish</code></li>
<li><code>perch/addons/apps/perch_dropbox</code></li>
</ul>
<p>And update your <code>perch/config/runway.php</code> file to change the <code>handler_path</code> for those apps to begin with <code>PERCH_CORE.&#39;/runway/apps/&#39;</code> e.g.</p>
<pre><code class="lang-php">&#39;handler_path&#39; =&gt; PERCH_CORE.&#39;/runway/apps/perch_dropbox/PerchDropbox_ResourceBucket.class.php&#39;,
</code></pre>
<h3 id="4-update-your-apps">4. Update your apps</h3>
<p>Changes in Runway 4 mean that your Runway 3 apps won’t work without being updated. Therefore you need to download the latest versions of your apps from the new <a href="https://addons.perchcms.com/">add-ons site</a>.</p>
<h3 id="5-log-in">5. Log in</h3>
<p>When you log in to the control panel, the updater will run as usual and you should be all set to go.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
