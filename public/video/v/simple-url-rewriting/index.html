<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple URL Rewriting - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Simple URL Rewriting">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
  <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://grabaperch.com/account">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li class="selected"><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
      <ul class="sidenav">
          <li>
              <a href="/video/getting-started/">Getting Started</a>
          </li>
          <li>
              <a href="/video/blog/">Perch Blog</a>
          </li>
          <li>
              <a href="/video/runway/">Perch Runway</a>
          </li>
      </ul>
    </nav>

<article class="content">

  <h1>Simple URL Rewriting</h1>

  <div class="video-wrapper">
    <div class="flex-video widescreen">
      <iframe src="https://www.youtube-nocookie.com/embed/P9G6hSbZbAM?showinfo=0&amp;rel=0" frameborder="0" allow="encrypted-media" gesture="media" allowfullscreen class="embed-responsive-item" width="847" height="476"></iframe>
    </div>
  </div>

  <div class="video-detail">
    <div class="inner-panel">
        <h2 id="video-transcript">Video Transcript</h2>
<p>Perch doesn’t assume a lot about your web server, one of the things we don’t do by default is rewrite all of the URLs of your site. This is for a couple of reasons. It means that you can add Perch to an existing site without changing any URLs, it also means that if you are on a server without mod_rewrite Perch will still work.</p>
<p>That said you can easily rewrite URLs in any way you would like. A common thing people like to do, and something we will do with our Swift website is hide the extension, so instead of visiting contact.php you would visit /contact.</p>
<p>Your server needs to have mod_rewrite enabled to do this.</p>
<p>To do this create a file called .htaccess in the site root or open one if it is already there.</p>
<p>Add the following:</p>
<pre><code class="lang-unix">    # Redirect to PHP if it exists.
    # e.g. example.com/foo will display the contents of example.com/foo.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f 
    RewriteRule ^(.+)$ $1.php [L,QSA]
</code></pre>
<p>You now need to update any Navigation to output links without the .php on the end, in our case this is the about section navigation which we can find on about/index.php and also the Master Page template perch/templates/pages/about.php</p>
<p>Add an option of ‘hide-extensions’ =&gt; true to the array.</p>
<p>You should also update any hardcoded navigation such as the top Nav.</p>
<p>To rewrite blog URLs to remove the query string we can add the following line to our file:</p>
<pre><code class="lang-unix">    RewriteRule ^blog/([a-zA-Z0-9-/]+)$ /blog/post.php?s=$1 [L]
</code></pre>
<p>Save the file and your post should now be accessible from the new URL. You now need to update your site to make sure that the links point to this new URL.</p>
<p>On the Settings page in Perch, find ‘Blog post page path’ in the Blog section. Set its value to:
/blog/{postSlug}</p>
<p>Now, wherever you use <code>&lt;perch:blog id=&quot;postURL&quot;&gt;</code> in your templates, the new URL will be used.</p>
<p>Some additional rules I have added are as follows:</p>
<pre><code class="lang-unix">    RewriteRule ^blog/([a-zA-Z0-9-/]+)/preview$ /blog/post.php?s=$1&amp;preview=all [L]
</code></pre>
<p>This rewrites the preview URL so that post preview will work once you have rewritten URLs.</p>
<pre><code class="lang-unix">    RewriteRule ^blog/category/([a-zA-Z0-9-/]+)/page/([0-9]+)/{0,1}$ /blog/archive.php?cat=$1&amp;page=$2 [L]
    RewriteRule ^blog/category/([a-zA-Z0-9-/]+)$ /blog/archive.php?cat=$1 [L]

    RewriteRule ^blog/date/([a-zA-Z0-9-/]+)/page/([0-9]+)/{0,1}$ /blog/archive.php?year=$1&amp;page=$2 [L]
    RewriteRule ^blog/date/([a-zA-Z0-9-/]+)$ /blog/archive.php?year=$1 [L]

    RewriteRule ^blog/tag/([a-zA-Z0-9-/]+)/page/([0-9]+)/{0,1}$ /blog/archive.php?tag=$1&amp;page=$2 [L]
    RewriteRule ^blog/tag/([a-zA-Z0-9-/]+)$ /blog/archive.php?tag=$1 [L]
</code></pre>
<p>These rewrite category, date and tag archives.</p>
<p>If you rewrite URLs that are used in your templates, for example the category URLs, don’t forget to go and update the links to these.</p>



        <ul class="pagination-pointed pagination text-center" role="navigation" aria-label="Pagination">
        </ul>

    </div>
    
  </div>




  
</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>