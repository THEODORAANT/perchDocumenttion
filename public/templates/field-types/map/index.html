<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Map - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Map">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li class="selected"><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/templates/core-concepts/">Template Core Concepts</a>
                        </li>
                        <li>
                            <a href="/templates/attributes/">Tag attributes</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/templates/field-types/">Field Types</a>
                            <ul>    <li>
                            <a href="/templates/field-types/checkbox/">Checkbox</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/composite/">Composite</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/dataselect/">Dataselect</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/date/">Date</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/file/">File</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/hidden/">Hidden</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/image/">Image</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/map/" class="selected">Map</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/messenger-chat/">Chat</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/period/">Period</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/radio/">Radio</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/select/">Select</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/slug/">Slug</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/smarttext/">Smarttext</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/text/">Text</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/templates/field-types/textarea/">Textarea</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/templates/apps/">App Specific Tags</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/templates/groups/">Field Groups</a>
                        </li>
                        <li>
                            <a href="/templates/blocks/">Blocks Tags</a>
                        </li>
                        <li>
                            <a href="/templates/categories/">Category Tags</a>
                        </li>
                        <li>
                            <a href="/templates/comments/">Template Comments</a>
                        </li>
                        <li>
                            <a href="/templates/conditionals/">Conditional Tags</a>
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/templates/form/">Form Tags</a>
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/templates/includes/">Template Includes</a>
                             
                        </li>
                        <li>
                            <a href="/templates/navigation/">Navigation Tags</a>
                        </li>
                        <li>
                            <a href="/templates/noresults/">No Results Tag</a>
                        </li>
                        <li>
                            <a href="/templates/pagination/">Pagination Tags</a>
                        </li>
                        <li>
                            <a href="/templates/passing-variables-into-templates/">Passing variables into templates</a>
                        </li>
                        <li>
                            <a href="/templates/repeaters/">Repeaters Tags</a>
                        </li>
                        <li>
                            <a href="/templates/search/">Search Tags</a>
                        </li>
                        <li>
                            <a href="/templates/show-all/">Show All Tag</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Map</h1>

  <p>Using <code>type=&quot;map&quot;</code> embeds a Google Map in the page. The editor can search for a location, position and zoom the map, set the map type and place a pin on the map.</p>
<h3 id="adding-your-google-maps-api-key">Adding your Google Maps API key</h3>
<p>To set your Google Maps API key for use with the fieldtype, add it to your <code>perch/config/config.php</code> file:</p>
<pre><code class="lang-php">define(&#39;PERCH_GMAPS_API_KEY&#39;, &#39;abc123&#39;);
</code></pre>
<h3 id="attributes-for-type-map">Attributes for type map</h3>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Values and description</th>
</tr>
</thead>
<tbody>
<tr>
<td>width</td>
<td>Integer. The width of the map on the page.</td>
</tr>
<tr>
<td>height</td>
<td>Integer. The height of the map on the page.</td>
</tr>
<tr>
<td>zoom</td>
<td>Integer. The default zoom level</td>
</tr>
</tbody>
</table>
<pre><code class="lang-html">&lt;perch:content id=&quot;map&quot; type=&quot;map&quot; label=&quot;Address&quot; width=&quot;400&quot; height=&quot;300&quot; zoom=&quot;15&quot;&gt;
</code></pre>
<h2 id="maps-and-responsive-layouts">Maps and Responsive layouts</h2>
<p>The map container needs to have dimensions in order for the Google Maps JavaScript to be able to plot the map. This is why the map has width and height attributes.</p>
<p>If your site is responsive, you may want to make the map flexible. You can do this if Perch is in RWD mode.</p>
<ol>
<li>Add <code>define(&#39;PERCH_RWD&#39;, true);</code> to your <code>perch/config/config.php</code> file</li>
<li>Remove the height and width from your map template tag</li>
<li>Save your map</li>
<li>Add CSS to your site to give the map container a default width and height (it gets given the class <code>cmsmap</code>)</li>
</ol>
<p>If you don’t follow that final step of giving the map a default width and height, <strong>nothing will display</strong>.</p>
<p>If your site has responsive images, you may also need to reset this within the map container. If you don’t, the controls like zoom and Street View may not display correctly.</p>
<pre><code class="lang-css">.cmsmap img {
    max-width: auto;
}
</code></pre>
<h2 id="showing-and-hiding-maps">Showing and hiding maps</h2>
<p>Due to the way the Google JavaScript works, if your map isn’t on screen when the page loads, it doesn’t display correctly when it’s then shown. This happens, for example, if the map is in a set of tabs. When the user switches to the tab the map is on, it shows but the layout is messed up.</p>
<p>To combat this, Perch adds a JavaScript method you can call to refresh the maps and get them working again.</p>
<pre><code class="lang-js">CMSMap.UI.refresh();
</code></pre>
<p>This should be called when the map is displayed. For example, if using Bootstrap tabs, you might do something like this:</p>
<pre><code class="lang-js">$(&#39;.nav-tabs a&#39;).click(function (e) {
    e.preventDefault();
    $(this).tab(&#39;show&#39;);
    CMSMap.UI.refresh();
});
</code></pre>
<h2 id="using-your-own-map-display-code">Using your own map display code</h2>
<p>If you want something radically different from what the Map field type provides, you’d be best to create a new field type to do that. If, however, there’s some small aspect you wish you could tweak (like adding custom markers, or changing the behaviour slightly) then it may be enough to switch out the default JavaScript for your own.</p>
<p>You can do that by adding the following to your
<code>perch/config/config.php</code> file:</p>
<pre><code class="lang-php">define(&#39;PERCH_MAP_JS&#39;, &#39;/path/to/your/script.js&#39;);
</code></pre>
<p>If doing so, the simplest approach is to take a copy of our <code>public_maps.js</code> script and modify it to suit your needs. Remember to store it outside of the <code>perch/core</code> folder so it doesn’t get overwritten on update.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
