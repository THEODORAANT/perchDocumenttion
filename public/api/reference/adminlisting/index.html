<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PerchAdminListing - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="PerchAdminListing">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">â˜°</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li class="selected"><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/api/apps/">Apps</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/api/auth/">Authentication plugins</a>
                        </li>
                        <li>
                            <a href="/api/buckets/">Bucket handlers</a>
                        </li>
                        <li>
                            <a href="/api/custom-ui/">UI Customisations</a>
                        </li>
                        <li>
                            <a href="/api/dashboard/">Dashboard Widgets</a>
                        </li>
                        <li>
                            <a href="/api/editors/">Editor plugins</a>
                        </li>
                        <li>
                            <a href="/api/events/">Event hooks</a>
                             
                        </li>
                        <li>
                            <a href="/api/template-filters/">Template filters</a>
                        </li>
                        <li>
                            <a href="/api/templates/">Template handlers</a>
                        </li>
                        <li>
                            <a href="/api/field-types/">Field Types</a>
                        </li>
                        <li>
                            <a href="/api/validators/">Form validators</a>
                        </li>
                        <li>
                            <a href="/api/search/">Search handlers</a>
                        </li>
                        <li>
                            <a href="/api/shortcodes/">Shortcode providers</a>
                        </li>
                        <li>
                            <a href="/api/translations/">Translations</a>
                        </li>
                        <li>
                            <a href="/api/feathers/">Feathers</a>
                        </li>
                        <li>
                            <a href="/api/import/">Importing Content</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/api/reference/">API Reference</a>
                            <ul>    <li>
                            <a href="/api/reference/perchapi/">Perch API</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/html/">HTML</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/lang/">Lang</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/template/">Template</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/xmltag/">PerchXMLTag</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/adminlisting/" class="selected">PerchAdminListing</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/db/">Database</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/fieldtype/">FieldType</a>
                             
                             
                             
                             
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/perchapi-base/">PerchAPI_Base</a>
                             
                             
                             
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/perchapi-factory/">PerchAPI_Factory</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/perchapi-submittedform/">PerchAPI_SubmittedForm</a>
                             
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/reference/settings/">Settings</a>
                        </li>
                    </ul>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>PerchAdminListing</h1>

  <p>The <code>PerchAdminListing</code> class provides a convenient way to produce data listings as a multi-column table.</p>
<p>To create a listing, you first instantiate a new <code>PerchAdminListing</code>, define your columns and then render it using your data.</p>
<pre><code class="lang-php">$Listing = new PerchAdminListing($CurrentUser, $HTML, $Lang, $Paging);

$Listing-&gt;add_col([
    /* ... */    
]);

$Listing-&gt;add_col([
    /* ... */    
]);

$Listing-&gt;add_col([
    /* ... */    
]);

echo $Listing-&gt;render($my_data);

</code></pre>
<h2 id="constructor">Constructor</h2>
<p>The constructor requires instances of the following:</p>
<ul>
<li><code>PerchAuthenticatedUser</code>, which is normally available as <code>$CurrentUser</code>]</li>
<li><code>PerchAPI_HTML</code></li>
<li><code>PerchAPI_Lang</code></li>
<li><code>PerchAPI_Paging</code></li>
</ul>
<pre><code class="lang-php">$Listing = new PerchAdminListing($CurrentUser, $HTML, $Lang, $Paging);
</code></pre>
<h2 id="methods">Methods</h2>
<p>The class exposes a number of methods.</p>
<h3 id="add_col-array-column_definition-">add_col(array $column_definition)</h3>
<p>Adds a column to the listing.</p>
<p>The column definition is an associative array consisting of the following</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>The column heading</td>
</tr>
<tr>
<td>sort</td>
<td>The ID of the data field to sort by if the column is sortable</td>
</tr>
<tr>
<td>value</td>
<td>The ID of the data field to display as the value, or a callable returning the value</td>
</tr>
<tr>
<td>edit_link</td>
<td>If the column has a link, the path to link to</td>
</tr>
<tr>
<td>gravatar</td>
<td>ID of the email field to use for displaying a Gravatar</td>
</tr>
<tr>
<td>icon</td>
<td>ID of the icon to use</td>
</tr>
</tbody>
</table>
<h3 id="add_delete_action-array-column_definition-">add_delete_action(array $column_definition)</h3>
<p>Adds a delete action button.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>inline</td>
<td>If true, displays a confirmation modal dialog rather than linking through to the delete page</td>
</tr>
<tr>
<td>path</td>
<td>Path to the delete page</td>
</tr>
<tr>
<td>message</td>
<td>Text to display in the confirmation dialog</td>
</tr>
</tbody>
</table>
<h3 id="enable_bulk_action-string-delete_path-">enable_bulk_action(string $delete_path)</h3>
<p>Enables checkboxes against each list item to enable bulk deletion. This will likely be enhanced in future versions to be able to specify different bulk actions, at which point the first argument will become an array. The current behaviour will be maintained.</p>
<p>Posts to the deletion page with an array of item IDs as GET options (<code>id[]=</code>).</p>
<h3 id="render-array-data-">render(array $data)</h3>
<p>Templates the listing using the data provided. The data should be an array of instances of the <code>PerchAPI_Base</code> class, like those returned by the <code>PerchAPI_Factory::all()</code> method.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
