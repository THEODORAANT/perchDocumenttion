<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Webmentions - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Webmentions">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li class="selected"><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/addons/announcements/">Announcements App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/backup/">Backup App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/blog/">Blog App</a>
                            <ul>    <li>
                            <a href="/addons/blog/changelog/">Changelog</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/examples/">Examples</a>
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/importing/">Importing Posts</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/installation/">Installation</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/post-types/">Post types</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/runway/">Runway</a>
                             
                             
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/spam/">Spam</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/updating/">Updating</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/addons/blog/webmentions/" class="selected">Webmentions</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/addons/comments/">Comments App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/email_octopus/">EmailOctopus App</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/events/">Events App</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/feathers/">Feathers</a>
                        </li>
                        <li>
                            <a href="/addons/field-types/">Field Types</a>
                             
                        </li>
                        <li>
                            <a href="/addons/forms/">Forms App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/gallery/">Gallery App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/kraken/">Kraken App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/listings/">Listings App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/mailchimp/">Mailchimp App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/members/">Members App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/plugins/">Plugins</a>
                             
                             
                        </li>
                        <li>
                            <a href="/addons/podcasts/">Podcasts App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/poll/">Poll App</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/qr/">QRGenerator App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-foxycart/">Foxycart Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop-paypal/">PayPal Shop App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/shop/">Shop App</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twillio/">Twilio App</a>
                             
                             
                             
                        </li>
                        <li>
                            <a href="/addons/twitter/">Twitter App</a>
                             
                             
                             
                             
                             
                             
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Webmentions</h1>

  <p><a href="https://webmention.net">Webmentions</a> are a way to notify another site that you’ve mentioned their content on your own site. Take an example:</p>
<ol>
<li>Sarah posts an article to her blog</li>
<li>James reads this post and in response creates a post on his own site linking to Sarah’s post</li>
<li>James’ blog software finds the link to Sarah’s blog in the post and notifies Sarah’s server of the link</li>
<li>Sarah’s blog software fetches James’ post and adds a link to it along with the comments section under her post</li>
</ol>
<p>In order for the process to work, both sides need to support webmentions. However, if one side doesn’t there are no ill effects, the process will just quietly fail.</p>
<p>There are two sides to implementing webmentions - sending, where you can respond to a post on someone else’s site, and receiving, where others can respond to you.</p>
<h2 id="sending-webmentions">Sending webmentions</h2>
<p>If sending is enabled, Blog will notify any sites you link to of your post when it goes live. As posts can go live on a schedule, this is done using <a href="https://docs.grabaperch.com/perch/getting-started/installing/scheduled-tasks/">scheduled tasks</a>.</p>
<p>To enable sending webmentions:</p>
<ol>
<li>Make sure your posts are marked up with microformats classes (see below)</li>
<li>In Settings, check the “Send webmentions” box in the Blog section and save</li>
<li>Make sure your scheduled tasks are being run frequently (probably at least once an hour, if not once a minute)</li>
<li>Make sure your site is in production mode (<code>PERCH_PRODUCTION</code>). Webmentions are not sent in staging or dev environments</li>
<li>Make sure your site is publicly accessible</li>
</ol>
<p>When a post goes live, Blog will find the links in your post and check each one to see if they have webmentions capability. If they do, it will notify them of your post.</p>
<h3 id="markup-with-microformats">Markup with microformats</h3>
<p>For this to work well, you should use microformats to mark up your posts. Particularly <a href="http://microformats.org/wiki/h-entry">h-entry</a> for the post and <a href="http://microformats.org/wiki/h-card">h-card</a> for the author information.</p>
<h2 id="receiving-webmentions">Receiving webmentions</h2>
<p>When receiving is enabled, others will be able to mention one of your posts on their site and let you know about it. When a mention is successfully logged, it will appear in your comments moderation queue as a comment. You can then edit it or just publish.</p>
<p>To prevent a malicious actor overloading your server, mention notifications are processed in batches by the scheduled tasks.</p>
<p>To enable receiving webmentions:</p>
<ol>
<li>In Settings, check the “Receive webmentions” box in the Blog section and save</li>
<li>Make sure your scheduled tasks are being run frequently</li>
<li>Make sure your site is publicly accessible</li>
<li>Add a call to <code>perch_blog_post_webmention_endpoint()</code> in the head of your single post template (see below)</li>
</ol>
<h3 id="advertising-your-webmentions-capabilities">Advertising your webmentions capabilities</h3>
<p>When a remove server checks your post to see if webmentions are enabled, it looks for either a special header, a link in the body, or a link tag in the <code>&lt;head&gt;</code> of the page. The last of these is by far the simplest.</p>
<p>In the <code>&lt;head&gt;</code> section of your template that displays a single post, add:</p>
<pre><code class="lang-php">perch_blog_post_webmention_endpoint(&#39;my-post-slug&#39;);
</code></pre>
<p>Where <code>my-post-slug</code> is the slug for your post. In the example files, the slug is on the query string as <code>s</code> so that would make the code:</p>
<pre><code class="lang-php">perch_blog_post_webmention_endpoint(perch_get(&#39;s&#39;));
</code></pre>
<p>This advertises your webmentions <em>endpoint</em> for the article, and Blog should start receiving notifications when they are sent.</p>
<h3 id="enabling-manual-pings">Enabling manual pings</h3>
<p>If someone writes a response to your post but doesn’t have a webmentions-capable publishing system, you can provide them with a form to notify you manually of the URL. To do this, call:</p>
<pre><code class="lang-php">perch_blog_post_ping_form(&#39;my-post-slug&#39;);
</code></pre>
<p>ere <code>my-post-slug</code> is the slug for your post. In the example files, the slug is on the query string as <code>s</code> so that would make the code:</p>
<pre><code class="lang-php">perch_blog_post_ping_form(perch_get(&#39;s&#39;));
</code></pre>
<h2 id="requirements">Requirements</h2>
<p>In order to parse the remote URLs for processing webmentions, you’ll need the following PHP extensions installed and enabled on your server:</p>
<ul>
<li>XML </li>
<li>mbstring</li>
<li>cURL</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<p>Webmentions involve a few different moving parts. If things aren’t working:</p>
<ol>
<li>Check your scheduled task list to see what the processes are reporting</li>
<li>Check your error log for any errors relating to webmentions</li>
<li>In the database, see what entries you have in <code>perch3_blog_webmention_queue</code>. If it’s not clearing, do the IDs increase each time the scheduler runs?</li>
<li>Post to the support forum with the above information and your diagnostic report and we’ll see if we can help</li>
</ol>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
