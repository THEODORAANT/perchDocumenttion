<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Registering - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Registering">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li class="selected"><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/api/apps/">Apps</a>
                            <ul>    <li>
                            <a href="/api/apps/registering/" class="selected">Registering</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/activating/">Activation</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/settings/">Adding Settings</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/runtime-functions/">Runtime functions</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/field-types/">Field types</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/scheduled-tasks/">Scheduled tasks</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/api/apps/upgrading/">Upgrading</a>
                             
                             
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/api/auth/">Authentication plugins</a>
                        </li>
                        <li>
                            <a href="/api/buckets/">Bucket handlers</a>
                        </li>
                        <li>
                            <a href="/api/custom-ui/">UI Customisations</a>
                        </li>
                        <li>
                            <a href="/api/dashboard/">Dashboard Widgets</a>
                        </li>
                        <li>
                            <a href="/api/editors/">Editor plugins</a>
                        </li>
                        <li>
                            <a href="/api/events/">Event hooks</a>
                             
                        </li>
                        <li>
                            <a href="/api/template-filters/">Template filters</a>
                        </li>
                        <li>
                            <a href="/api/templates/">Template handlers</a>
                        </li>
                        <li>
                            <a href="/api/field-types/">Field Types</a>
                        </li>
                        <li>
                            <a href="/api/validators/">Form validators</a>
                        </li>
                        <li>
                            <a href="/api/search/">Search handlers</a>
                        </li>
                        <li>
                            <a href="/api/shortcodes/">Shortcode providers</a>
                        </li>
                        <li>
                            <a href="/api/translations/">Translations</a>
                        </li>
                        <li>
                            <a href="/api/feathers/">Feathers</a>
                        </li>
                        <li>
                            <a href="/api/import/">Importing Content</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/api/reference/">API Reference</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Registering</h1>

  <p>If an app provides an interface via the Perch control panel, it must register itself with Perch. This is done in the <code>perch/addons/apps/my_app/admin.php file</code>.</p>
<pre><code class="lang-php">    $this-&gt;register_app(&#39;my_app&#39;, &#39;My App&#39;, 5, &#39;An exciting app of goodness&#39;, &#39;1.0&#39;);
</code></pre>
<p>The register_app() method takes 6 arguments prior to this Perch version it took 5:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>Your app ID</td>
</tr>
<tr>
<td>String</td>
<td>A name/label for your app</td>
</tr>
<tr>
<td>Int</td>
<td>The priority in which is should appear on the Perch tab bar</td>
</tr>
<tr>
<td>String</td>
<td>A brief description (unused currently)</td>
</tr>
<tr>
<td>String</td>
<td>A semantic versioning version number</td>
</tr>
<tr>
<td>Bool</td>
<td>Whether the app should display in the app menu</td>
</tr>
</tbody>
</table>
<p>There’s no good way to determine the priority setting you should give. If your app does something administrative, it would make sense to give it a high number to shift it to the end of the line of tabs (Pages is always the first item). Really this is more to give the user control of the apps they have installed.</p>
<p>Once an app is registered, it appears on the tab bar.</p>
<h2 id="asserting-a-required-version">Asserting a required version</h2>
<p>If your app relies on a certain version of Perch to run (perhaps using features that an older install of Perch would not have available), you can assert that your app requires a minimum version:</p>
<pre><code class="lang-php">$this-&gt;require_version(&#39;my_app&#39;, &#39;1.7.3&#39;);
</code></pre>
<p>If the version of Perch is not greater than or equal to the number you state, Perch will throw an error preventing the user from continuing until they update or uninstall the app.</p>
<h2 id="autoloading">Autoloading</h2>
<p>The <code>admin.php</code> file is also the place to add your app’s autoloader so that your class files can be found. You’ll do the same in your <code>runtime.php</code> file for any classes needed by page functions.</p>
<pre><code class="lang-php">spl_autoload_register(function($class_name){
    if (strpos($class_name, &#39;MyApp_&#39;)===0) {
        include(PERCH_PATH.&#39;/addons/apps/my_app/lib/&#39;.$class_name.&#39;.class.php&#39;);
        return true;
    }
    return false;
});
</code></pre>
<h2 id="template-handers">Template handers</h2>
<p>If your app uses a <a href="/api/templates/">template handler</a> for handling custom template tags, you can also register that in your <code>admin.php</code> file.</p>
<pre><code class="lang-php">PerchSystem::register_template_handler(&#39;MyApp_Template&#39;);
</code></pre>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
