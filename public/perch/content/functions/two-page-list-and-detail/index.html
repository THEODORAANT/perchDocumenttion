<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Two page list and detail - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Two page list and detail">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link selected"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/perch/getting-started/">Getting Started With Perch</a>
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/configuration/">Configuration</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/building/">Building Sites with Perch</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/categories/">Categories</a>
                             
                        </li>
                        <li>
                            <a href="/perch/content/">Working with Content</a>
                            <ul>    <li>
                            <a href="/perch/content/functions/">Functions</a>
                            <ul>    <li>
                            <a href="/perch/content/functions/content-from-multiple-pages-and-regions/">Combining Content from Several Regions</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/create-a-prepopulated-region/">Pre-populating Template Regions</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/get-content-before-templating/">Accessing content before it is templated</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/how-do-i-add-an-rss-feed/">Adding an RSS Feed</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/how-do-i-create-a-faq/">Creating a FAQ</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/how-do-i-create-a-google-sitemap/">Create a Google Sitemap</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/how-do-i-create-list-detail-pages/">Create a list detail page</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/how-do-i-link-prev-next/">Previous and Next Links in content</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/passing-options-to-custom-functions/">How to pass options to custom functions</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/show-one-random-item/">Display an item at random</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/sorting-data/">Sorting data</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/two-page-list-and-detail/" class="selected">Two page list and detail</a>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/functions/user-filtered-lists/">A user-filtered list</a>
                        </li>
                    </ul>
                        </li>
                    </ul>
                            <ul>    <li>
                            <a href="/perch/content/templates/">Templates</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/perch/control-panel/">The Perch Control Panel</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/help/">Troubleshooting Tips</a>
                        </li>
                        <li>
                            <a href="/perch/pages-and-nav/">Pages and Navigation</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/resources/">Managing Resources</a>
                             
                        </li>
                        <li>
                            <a href="/perch/upgrading/">Upgrading to Perch 3</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Two page list and detail</h1>

  <p><strong>How do I create two-page list and detail pages?</strong></p>
<p>Sometimes you want to have two different files handling list and detail duties. Here’s how to set it up.</p>
<p>In <a href="/perch/content/functions/how-do-i-create-list-detail-pages">Creating List and Detail Pages</a> we set up a single page that could act in both list and detail mode. Sometimes it’s desirable to have two different pages perform those tasks.</p>
<p>The key tasks are:</p>
<ol>
<li>Move the detail code onto its own page</li>
<li>Update the detail code to reference the region on the listing page</li>
<li>Update the listing template to link to the new page for detail links</li>
</ol>
<h2 id="setting-up-the-pages">Setting up the pages</h2>
<p>In the previous example, we had the page <code>products.php</code> working in both list and detail mode. This time we’ll use <code>products.php</code> to act as the list page, and <code>product.php</code> as the detail page.</p>
<p>The list page, <code>products.php</code> has two jobs:</p>
<ol>
<li>To create and hold the region containing the content</li>
<li>To show the list of products, each linking through to the detail page</li>
</ol>
<p>The detail page, <code>product.php</code> does just one thing; show the detail of the product.</p>
<h2 id="the-list-page">The list page</h2>
<p>Just as before, the list page needs to create the content region to hold the items.</p>
<pre><code class="lang-php">    &lt;?php
    perch_content_create(&#39;Products&#39;, array(
         &#39;template&#39;   =&gt; &#39;product_detail.html&#39;,
         &#39;multiple&#39;    =&gt; true,
         &#39;edit-mode&#39; =&gt; &#39;listdetail&#39;,
    ));
    ?&gt;
</code></pre>
<p>Then we need to add the list code.</p>
<pre><code class="lang-php">    perch_content_custom(&#39;Products&#39;, array(
         &#39;template&#39; =&gt; &#39;product_listing.html&#39;,
    ));
</code></pre>
<h2 id="the-detail-page">The detail page</h2>
<p>The detail page needs to use the detail code as before, but this time adding a new option. We need to set the page option to point to the location of the listing page. This is because the region that holds the content lives on the listing page. In order to display the content, we need to tell Perch which page to get it from.</p>
<p>The page option needs a root-relative path, so it always starts with a forward-slash.</p>
<pre><code class="lang-php">    perch_content_custom(&#39;Products&#39;, array(
         &#39;page&#39; =&gt; &#39;/products.php&#39;,
         &#39;template&#39; =&gt; &#39;product_detail.html&#39;,
         &#39;filter&#39; =&gt; &#39;slug&#39;,
         &#39;match&#39; =&gt; &#39;eq&#39;,
         &#39;value&#39; =&gt; perch_get(&#39;s&#39;),
         &#39;count&#39; =&gt; 1,
    ));
</code></pre>
<p>In this case, I’m pointing it to <code>/products.php</code> to get the content. That means the <code>products.php</code> page in the root of the website. If <code>products.php</code> were to be in a subfolder, I’d need to adjust the path from the root of the site, e.g. <code>/what-we-do/products.php</code>.</p>
<h2 id="adjusting-the-templates">Adjusting the templates</h2>
<p>The only thing left to do is change the listing template to make sure it links to the location of the detail page.</p>
<p>Where we previously had a link to the detail view:</p>
<pre><code class="lang-html">    &lt;a href=&quot;?s=&lt;perch:content id=&quot;slug&quot; type=&quot;slug&quot;&gt;&quot;&gt; … &lt;/a&gt;
</code></pre>
<p>we need to update the href to make sure the page name is included:</p>
<pre><code class="lang-html">    &lt;a href=&quot;product.php?s=&lt;perch:content id=&quot;slug&quot; type=&quot;slug&quot;&gt;&quot;&gt; … &lt;/a&gt;
</code></pre>
<p>Your two-page list and detail should now be complete.</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
