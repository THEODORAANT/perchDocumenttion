<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Managing Resources - Perch CMS documentation</title>
  <meta name="description" content="Perch documentation">
  <meta property="og:title" content="Managing Resources">
  <meta property="og:description" content="Perch documentation">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link href="/assets/css/docs.css" rel="stylesheet">
  <script type="text/javascript" src="//use.typekit.net/kiw6gix.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  

</head>
<body>
  <nav class="global-bar show-for-small-only">
    <ul class="nav-products">
        <li class="docs"><a href="https://docs.grabaperch.com">Docs</a></li>
    </ul>
    <a href="?nav=show" class="hamburger">☰</a>
</nav>
<nav class="global-bar primary show-for-medium">
    <ul class="nav-products">
        <li class="perch"><a href="https://grabaperch.com">Perch</a></li>
        <li class="runway"><a href="https://perchrunway.com">Runway</a></li>
        <li class="shop"><a href="https://shop.perchcms.com">Perch Shop</a></li>
        <li class="addons first-right"><a href="https://grabaperch.com/add-ons">Add-ons</a></li>
        <li class="selected docs"><a href="https://docs.grabaperch.com">Docs</a></li>
        <li class="support"><a href="https://community.perchcms.com/forum/">Support</a></li>
        <li class="account"><a href="https://account.perchcms.com">Account</a></li>
    </ul>
</nav>
<nav class="site-nav">
    <ul>
        <li class="home-link selected"><a href="/perch/">Perch Docs</a></li>
        <li><a href="/runway/">Runway Docs</a></li>
        <li><a href="/video/">Video</a></li>
        <li><a href="/templates/">Template Reference</a></li>
        <li><a href="/functions/">Function Reference</a></li>
        <li><a href="/addons/">Add-ons</a></li>
        <li><a href="/api/">API</a></li>
    </ul>

    <div class="global-search" role="search">
      <div class="gcse-searchbox"></div>
    </div>

    <style>
      .custom-search {
        with
      }
  
      table.gsc-input {
        margin: 0;
        height: 1.5em;
      }

      form.gsc-search-box {
        margin: 0;
      }

      .gsc-search-box tbody {
        border: none;
      }

      .gsc-search-box tbody td {
        padding: 0;
      }

      .gsc-control-cse {
        padding: 0;
      }

      .gsc-input-box {
        border: none;
      }

      .gsc-search-box a {
        padding: 0;
      }
    </style>
</nav>

<div class="gcse-searchresults"></div>
<main class="wrapper">
    <nav class="sidebar">
    <ul class="sidenav">
                        <li>
                            <a href="/perch/getting-started/">Getting Started With Perch</a>
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/configuration/">Configuration</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/building/">Building Sites with Perch</a>
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/categories/">Categories</a>
                             
                        </li>
                        <li>
                            <a href="/perch/content/">Working with Content</a>
                             
                             
                        </li>
                        <li>
                            <a href="/perch/control-panel/">The Perch Control Panel</a>
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/help/">Troubleshooting Tips</a>
                        </li>
                        <li>
                            <a href="/perch/pages-and-nav/">Pages and Navigation</a>
                             
                             
                             
                             
                        </li>
                        <li>
                            <a href="/perch/resources/" class="selected">Managing Resources</a>
                            <ul>    <li>
                            <a href="/perch/resources/buckets/">Resource Buckets</a>
                        </li>
                    </ul>
                        </li>
                        <li>
                            <a href="/perch/upgrading/">Upgrading to Perch 3</a>
                        </li>
    </ul>  </nav>

<article class="content">


  <h1>Managing Resources</h1>

  <p>Files and images that are uploaded by content editors into Perch are known as <em>resources</em>. They are stored on the server (not in the database) until no longer needed.</p>
<p>By default, resources are stored in the <code>perch/resources</code> folder. You can change for new installations in the <code>perch/config/config.php</code> file.</p>
<p>The two configuration options are <code>PERCH_RESFILEPATH</code> (the file system path to your folder) and <code>PERCH_RESPATH</code> (the web path to the folder from the root of your site). The standard Perch setup creates the following configuration:</p>
<pre><code class="lang-php">define(&#39;PERCH_RESFILEPATH&#39;, PERCH_PATH . DIRECTORY_SEPARATOR . &#39;resources&#39;);
define(&#39;PERCH_RESPATH&#39;, PERCH_LOGINPATH . &#39;/resources&#39;);
</code></pre>
<p>It uses a bunch of other configuration constants to figure out the paths for your site, but this could be updated using basic paths:</p>
<pre><code class="lang-php">define(&#39;PERCH_RESFILEPATH&#39;, &#39;/var/www/mysite/public_html/files&#39;);
define(&#39;PERCH_RESPATH&#39;, &#39;/files&#39;);
</code></pre>
<p>The default resource folder must part of your website, so its files can be directly accessed by a URL.</p>
<h2 id="resource-clean-up">Resource clean-up</h2>
<p>When resources are no longer needed, they are deleted from the server. This happens when an item is deleted, or one resource is replaced with another.</p>
<p>However, Perch maintains an undo history, and so resource clean-up isn’t immediate. This means that you can delete an item that uses an image, for example, and still undo that change. A resource is only deleted once the action that removed it is no longer undoable. By default, the undo history saves 30 steps, so a file will only be deleted after 30 edits.</p>
<p>(A bug with Perch 2.0.x meant that resource use wasn’t correctly logged. This means Perch was unable to clean up those resources. Any resources left around from that time period will need to be cleared up manually – we couldn’t find a safe way to go back without risking data loss. This was fixed in Perch 2.1.)</p>

</article>




</main>
<footer>
</footer>
<script async src="https://cse.google.com/cse.js?cx=007560778035763025039:043iekruiov"></script>
<script src="/assets/js/prism.js" async defer></script>
<script>
    if ("classList" in document.createElement("_")) {
        var hb = document.querySelectorAll('.hamburger');
        if (hb.length) {
            hb[0].addEventListener('click', function(e) {
                e.preventDefault();
                var nav = document.querySelectorAll('nav.primary')[0];
                if (!nav.classList.contains('show')) {
                    nav.classList.remove('show-for-medium', 'hide');
                    nav.classList.add('show');
                } else {
                    nav.classList.remove('show');
                    nav.classList.add('hide');
                }
            });
        }
    }


        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-8618320-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
